<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Cauchy–Schwarz Inequality</title>
  <style>
    :root{ --bg:#f7f9fc; --card:#ffffff; --text:#0f172a; --muted:#475569; --border:#e2e8f0; --chip:#eef2ff; }
    html, body { background: var(--bg); color: var(--text); font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial; }
    .container{ max-width: 960px; margin: 24px auto; padding: 0 16px; }
    .card{ background:#fff; border:1px solid var(--border); border-radius:16px; padding:16px; box-shadow:0 6px 20px rgba(2,6,23,.05); }
    .stack{ display:flex; flex-direction:column; gap:16px; }
    .row{ display:flex; gap:12px; align-items:center; }
    .kpi{ display:flex; gap:16px; flex-wrap:wrap; }
    .kpi .card{ padding:12px 14px; }
    .mono{ font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Courier New", monospace; word-break:break-word; overflow-wrap:anywhere; }
    .badge{ padding:2px 8px; border:1px solid #cbd5e1; border-radius:999px; font-weight:700; font-size:12px; background:#f1f5f9; }
    .ok{ background:#dcfce7; border-color:#86efac; }
    .fail{ background:#fee2e2; border-color:#fecaca; }
    .small{ font-size:12px; color:#475569; }
    input.long{ width:100%; padding:8px 10px; border:1px solid var(--border); border-radius:10px; background:#fbfdff; }
    input.short{ width:120px; padding:6px 8px; border:1px solid var(--border); border-radius:10px; background:#fbfdff; }
    .inline{ display:flex; gap:10px; flex-wrap:wrap; }
  </style>
</head>
<body>
  <div class="container stack">
    <header class="card stack">
      <h1 style="margin:0">Cauchy–Schwarz inequality</h1>
      <span class="badge">Problem: |⟨x,y⟩| ≤ ‖x‖·‖y‖ in ℝⁿ</span>
      <p class="small">We compute inner product and norms, check the inequality, explain why it holds, and run a small harness.</p>
    </header>

    <section class="card stack">
      <h2 style="margin:0">Input</h2>
      <div class="row"><label class="mono" for="xInput" style="min-width:140px">x</label><input class="long" id="xInput" type="text" value="1, 2, 3" /></div>
      <div class="row"><label class="mono" for="yInput" style="min-width:140px">y</label><input class="long" id="yInput" type="text" value="3, -1, 4" /></div>
      <div class="inline">
        <div class="row"><label class="mono" for="epsInput">ε</label><input class="short" id="epsInput" type="number" step="any" value="1e-12" /></div>
        <div class="row"><button id="solve">Evaluate</button><button id="clear">Clear</button></div>
      </div>
    </section>

    <section class="card stack">
      <h2 style="margin:0">Output</h2>
      <div class="kpi">
        <div class="card"><div class="k">⟨x,y⟩</div><div id="ip" class="mono">—</div></div>
        <div class="card"><div class="k">‖x‖</div><div id="nx" class="mono">—</div></div>
        <div class="card"><div class="k">‖y‖</div><div id="ny" class="mono">—</div></div>
        <div class="card"><div class="k">‖x‖·‖y‖</div><div id="bound" class="mono">—</div></div>
        <div class="card"><div class="k">Slack</div><div id="slack" class="mono">—</div></div>
        <div class="card"><div class="k">Verdict</div><div id="verdict" class="mono">—</div></div>
      </div>
      <div>
        <h3 style="margin:0">Check (harness)</h3>
        <div id="checks" class="stack"></div>
      </div>
    </section>

    <section class="card stack">
      <h2 style="margin:0">Reason Why</h2>
      <div class="small">
        For any real t, ‖x − t y‖² ≥ 0 expands to ‖x‖² − 2t⟨x,y⟩ + t²‖y‖² ≥ 0. The discriminant is ≤ 0, hence
        (2⟨x,y⟩)² ≤ 4‖x‖²‖y‖², i.e. |⟨x,y⟩| ≤ ‖x‖‖y‖. Equality holds iff x and y are linearly dependent.
      </div>
    </section>
  </div>

<script>
// Extremely conservative, ES5-only JS
(function(){
  function $(id){ return document.getElementById(id); }
  function parseVec(s){
    var parts = String(s||'').split(',');
    var out = []; for (var i=0;i<parts.length;i++){ var v = Number(parts[i].trim()); if (!isFinite(v)) throw new Error('Invalid number at position '+(i+1)); out.push(v); }
    if (!out.length) throw new Error('Empty vector'); return out;
  }
  function dot(a,b){ var s=0, n=a.length; for (var i=0;i<n;i++) s += a[i]*b[i]; return s; }
  function norm(a){ var s=0, n=a.length; for (var i=0;i<n;i++) s += a[i]*a[i]; return Math.sqrt(s); }
  function row(ok,label,msg){
    var div = document.createElement('div'); div.className='row';
    var badge = document.createElement('span'); badge.className='badge '+(ok?'ok':'fail'); badge.appendChild(document.createTextNode(ok?'PASS':'FAIL'));
    var lab = document.createElement('span'); lab.className='mono'; lab.appendChild(document.createTextNode(label));
    var txt = document.createElement('span'); txt.className='mono'; txt.appendChild(document.createTextNode(' — '+msg));
    div.appendChild(badge); div.appendChild(lab); div.appendChild(txt); return div;
  }
  function clearChecks(){ var c=$('checks'); while(c.firstChild) c.removeChild(c.firstChild); }

  function evaluate(){
    try{
      $('verdict').textContent = '(computing…)';
      var x = parseVec($('xInput').value); var y = parseVec($('yInput').value);
      if (x.length !== y.length) throw new Error('x and y must have the same length');
      var eps = Number($('epsInput').value || 1e-12);
      var ip = dot(x,y), nx = norm(x), ny = norm(y), bound = nx*ny, slack = bound - Math.abs(ip);
      $('ip').textContent = ip.toPrecision(12);
      $('nx').textContent = nx.toPrecision(12);
      $('ny').textContent = ny.toPrecision(12);
      $('bound').textContent = bound.toPrecision(12);
      $('slack').textContent = (slack>=0?slack:0).toPrecision(12);
      var ok = Math.abs(ip) <= bound + Math.max(eps,1e-12);
      $('verdict').textContent = (ok?'PASS':'FAIL') + ' — |⟨x,y⟩|≤‖x‖‖y‖';

      clearChecks();
      var c=$('checks');
      c.appendChild(row(ok,'Cauchy–Schwarz','|⟨x,y⟩|≤‖x‖‖y‖'));
      c.appendChild(row( Math.abs(ip*ip) <= nx*nx*ny*ny + 1e-12,'Squared form','⟨x,y⟩² ≤ ‖x‖²‖y‖²'));
      if (nx>0 && ny>0){ var cosv = ip/(nx*ny); c.appendChild(row(Math.abs(cosv)<=1+1e-12,'Cosine bound','|cosθ|≤1')); }
      c.appendChild(row( Math.abs(dot(y,x)-ip) <= 1e-12,'Symmetry','⟨x,y⟩=⟨y,x⟩'));
      if (ny>0){ var r2 = nx*nx - (ip*ip)/(ny*ny); c.appendChild(row( r2 >= -1e-10,'Projection residual ≥ 0','‖x‖² - ⟨x,y⟩²/‖y‖² ≥ 0')); }
    } catch(e){
      $('ip').textContent='—'; $('nx').textContent='—'; $('ny').textContent='—'; $('bound').textContent='—'; $('slack').textContent='—';
      $('verdict').textContent = 'Error: '+e.message; clearChecks();
    }
  }

  function wire(){
    $('solve').onclick = evaluate;
    $('clear').onclick = function(){ $('xInput').value='1, 2, 3'; $('yInput').value='3, -1, 4'; $('epsInput').value='1e-12'; evaluate(); };
  }

  // bootstrap now
  try{ wire(); }catch(e){ var v=$('verdict'); if(v) v.textContent='Wire error: '+e.message; }
  try{ evaluate(); }catch(e){ var v=$('verdict'); if(v) v.textContent='Eval error: '+e.message; }
})();
</script>
</body>
</html>

