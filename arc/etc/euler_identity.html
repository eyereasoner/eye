<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Euler’s Identity</title>
<style>
  :root{
    --bg:#f9fafb; --card:#ffffff; --ink:#111827; --ink-dim:#4b5563;
    --muted:#6b7280; --border:#e5e7eb; --code:#f3f4f6;
    --accent:#2563eb; --accent-ink:#ffffff; --ok:#16a34a; --warn:#dc2626;
    --badge:#e2e8f0; --badge-ink:#334155;
  }
  *{box-sizing:border-box}
  html,body{margin:0;background:var(--bg);color:var(--ink);font:16px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,"Helvetica Neue",Arial}
  a{color:#1d4ed8;text-decoration:none} a:hover{text-decoration:underline}
  .wrap{max-width:900px;margin:0 auto;padding:28px 16px 40px}
  header{display:flex;flex-wrap:wrap;gap:10px;align-items:center;margin-bottom:16px}
  header h1{margin:0;font-size:20px;font-weight:700;letter-spacing:.2px}
  .badge{background:var(--badge);color:var(--badge-ink);border:1px solid var(--border);padding:6px 10px;border-radius:999px;font-size:12px}
  .card{background:var(--card);border:1px solid var(--border);border-radius:16px;padding:18px;box-shadow:0 10px 30px rgba(0,0,0,.04);margin-top:16px}
  .card h2{margin:0 0 12px;font-size:16px;letter-spacing:.2px}
  .row{display:flex;gap:12px;align-items:center;flex-wrap:wrap}
  .input{background:#fff;border:1px solid var(--border);border-radius:12px;padding:10px 12px;color:var(--ink);font-weight:600;min-width:120px}
  .input:focus{outline:3px solid rgba(37,99,235,.2);border-color:#93c5fd}
  .btn{background:var(--accent);color:var(--accent-ink);border:0;padding:10px 14px;font-weight:700;border-radius:12px;cursor:pointer}
  .btn:disabled{opacity:.6;cursor:not-allowed}
  .btn.copy{background:#e5e7eb;color:#111827}
  .mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace}
  .dim{color:var(--muted)}
  .kpi{font-weight:800}
  .stat{
    display:grid; grid-template-columns:auto 1fr; align-items:baseline; gap:8px;
    background:#fff; padding:8px 10px; border-radius:12px; border:1px solid var(--border);
  }
  #answer{
    max-width:100%; white-space:normal; overflow-wrap:anywhere; word-break:break-word; line-break:anywhere;
    font-size:clamp(0.9rem, 1vw + 0.75rem, 1.1rem);
  }
  code,pre{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono",monospace}
  pre{background:var(--code);border:1px solid var(--border);border-radius:12px;padding:14px;overflow:auto}
  .ok{color:var(--ok)} .bad{color:var(--warn)}
  .log{font-size:13px;max-height:240px;overflow:auto;background:var(--code);border:1px dashed var(--border);padding:10px;border-radius:12px;white-space:pre-wrap}
  .pill{display:inline-block;padding:2px 8px;border-radius:999px;border:1px solid var(--border);background:#fff;color:var(--ink-dim);font-size:12px}
</style>
</head>
<body>
<div class="wrap">
  <header>
    <h1>Euler’s identity</h1>
  </header>

  <!-- Mathematical English -->
  <section class="card">
    <h2>Euler’s identity</h2>
    <p class="dim">
      Euler’s formula says <em>e<sup>ix</sup> = cos x + i sin x</em>. Setting <em>x = π</em> gives
      <strong>e<sup>iπ</sup> = −1</strong>, hence <strong>e<sup>iπ</sup> + 1 = 0</strong>.
    </p>
  </section>

  <section class="card">
    <h2>Visual intuition</h2>
    <p class="dim">On the unit circle in the complex plane, rotating by π lands at −1. Adding 1 shifts the point to the origin.</p>
    <svg viewBox="-130 -140 260 260" width="100%" role="img" aria-label="Unit circle: e^{iπ} at -1, then +1 shift to 0" style="max-height:320px">
      <title>Euler’s identity on the unit circle</title>
      <desc>Vector from 0 to -1 showing e^{iπ}; dashed arrow labeled +1 returns to the origin, so e^{iπ}+1=0.</desc>

      <!-- arrowhead -->
      <defs>
        <marker id="arrow" markerWidth="8" markerHeight="8" refX="6" refY="3" orient="auto">
          <path d="M0,0 L0,6 L6,3 z" fill="#111827"></path>
        </marker>
        <marker id="arrowAccent" markerWidth="8" markerHeight="8" refX="6" refY="3" orient="auto">
          <path d="M0,0 L0,6 L6,3 z" fill="#2563eb"></path>
        </marker>
      </defs>

      <!-- axes -->
      <line x1="-120" y1="0" x2="120" y2="0" stroke="#9ca3af" stroke-width="1.2" marker-end="url(#arrow)"/>
      <line x1="0" y1="120" x2="0" y2="-120" stroke="#9ca3af" stroke-width="1.2" marker-end="url(#arrow)"/>
      <text x="122" y="0" dy="-6" font-size="10" fill="#6b7280">Re</text>
      <text x="0" y="-124" dx="6" font-size="10" fill="#6b7280">Im</text>

      <!-- unit circle -->
      <circle cx="0" cy="0" r="100" fill="none" stroke="#e5e7eb" stroke-width="1.5"/>

      <!-- angle arc π -->
      <path d="M 30 0 A 30 30 0 0 1 -30 0" fill="none" stroke="#6b7280" stroke-width="1.5"/>
      <text x="0" y="-36" text-anchor="middle" font-size="12" fill="#6b7280">π</text>

      <!-- vector e^{iπ} to (-1,0) -->
      <line x1="0" y1="0" x2="-100" y2="0" stroke="#2563eb" stroke-width="2.5" marker-end="url(#arrowAccent)"/>
      <circle cx="-100" cy="0" r="3.2" fill="#2563eb"/>
      <text x="-104" y="-8" font-size="12" fill="#2563eb">e^{iπ} = −1</text>

      <!-- dashed +1 shift to origin -->
      <line x1="-100" y1="0" x2="0" y2="0" stroke="#111827" stroke-width="2" stroke-dasharray="6 6" marker-end="url(#arrow)"/>
      <text x="-50" y="16" text-anchor="middle" font-size="12" fill="#111827">+1</text>

      <!-- origin label -->
      <circle cx="0" cy="0" r="2.8" fill="#111827"/>
      <text x="4" y="-6" font-size="12" fill="#111827">0</text>
    </svg>
  </section>

  <!-- A · Answer -->
  <section class="card" aria-labelledby="answer-title">
    <h2 id="answer-title">Answer</h2>
    <div class="row" style="margin:10px 0 14px">
      <label class="dim" for="epsInput">tolerance ε:</label>
      <input id="epsInput" class="input mono" type="text" value="1e-12" />
      <button id="runBtn" class="btn">Compute + Check</button>
      <button id="copyBtn" class="btn copy">Copy ARC JSON</button>
    </div>
    <div class="stat" role="status" aria-live="polite">
      <span class="dim">e^{iπ} + 1 =</span>
      <span id="answer" class="kpi mono">0</span>
    </div>
    <p class="dim">By Euler’s formula and the facts <span class="mono">cos π = −1</span>, <span class="mono">sin π = 0</span>.</p>
  </section>

  <!-- R · Reason why -->
  <section class="card" aria-labelledby="reason-title">
    <h2 id="reason-title">Reason why (Lean 4 sketch)</h2>
    <p class="dim">
      In mathlib, <code>Complex.exp_mul_I</code> gives <code>exp (x·I) = cos x + I·sin x</code>. With <code>x = π</code> and
      <code>Real.cos_pi = -1</code>, <code>Real.sin_pi = 0</code>, we get <code>exp (π·I) = -1</code>, hence
      <code>exp (π·I) + 1 = 0</code>.
    </p>
<pre><code>-- Lean 4 (mathlib) sketch of Euler's identity: exp(π·I) + 1 = 0
import Mathlib
open Complex

theorem euler_identity : Complex.exp (Real.pi * Complex.I) + 1 = 0 := by
  -- exp (x·I) = cos x + I·sin x
  have h := Complex.exp_mul_I Real.pi
  -- Substitute x = π and use cos π = -1, sin π = 0
  simpa [Real.cos_pi, Real.sin_pi] using h
</code></pre>
    <p class="dim">The snippet explains the formal reason; the browser doesn’t execute Lean.</p>
  </section>

  <!-- C · Check (independent harness) -->
  <section class="card" aria-labelledby="check-title">
    <h2 id="check-title">Check (independent harness)</h2>
    <p class="dim">
      We independently compute <em>z = e^{iπ} + 1</em> numerically via
      <span class="mono">cos(π) + i·sin(π)</span> and check that <span class="mono">|z| ≤ ε</span>.
      This is a numerical verification (floating-point) independent of the Lean reasoning.
    </p>

    <div class="row" style="margin-bottom:8px">
      <div id="statusPill" class="pill">idle</div>
      <div><span class="dim">|z|:</span> <span id="mag" class="mono">–</span></div>
    </div>
    <div id="log" class="log mono" aria-live="polite"></div>

    <h3>Result</h3>
    <p><span class="dim">Check status:</span> <strong id="checkStatus">–</strong></p>
  </section>
</div>

<script>
(function () {
  const epsInput = document.getElementById('epsInput');
  const runBtn   = document.getElementById('runBtn');
  const copyBtn  = document.getElementById('copyBtn');
  const ansEl    = document.getElementById('answer');
  const magEl    = document.getElementById('mag');
  const logEl    = document.getElementById('log');
  const pillEl   = document.getElementById('statusPill');
  const checkEl  = document.getElementById('checkStatus');

  let lastARC = null;

  function setStatus(text, kind) {
    pillEl.textContent = text;
    pillEl.style.borderColor = 'var(--border)';
    if (kind === 'ok') { pillEl.style.background = '#dcfce7'; pillEl.style.color = 'var(--ok)'; }
    else if (kind === 'bad') { pillEl.style.background = '#fee2e2'; pillEl.style.color = 'var(--warn)'; }
    else { pillEl.style.background = '#fff'; pillEl.style.color = 'var(--ink-dim)'; }
  }
  function log(line){ logEl.textContent += line + '\n'; logEl.scrollTop = logEl.scrollHeight; }

  function parseEps(s){
    const t = String(s).trim();
    const v = Number(t);
    if (!isFinite(v) || v <= 0) throw new Error('Please enter a positive numeric tolerance, e.g., 1e-12.');
    return v;
  }

  function run(){
    logEl.textContent = ''; setStatus('running'); checkEl.textContent = '…';

    let eps;
    try { eps = parseEps(epsInput.value); }
    catch(e){ setStatus('bad input','bad'); log('× '+e.message); return; }

    // Compute z = e^{iπ} + 1 using cis(π) = cos π + i sin π
    const re = Math.cos(Math.PI) + 1;      // should be 0
    const im = Math.sin(Math.PI);          // should be 0
    const mag = Math.hypot(re, im);

    ansEl.textContent = `${re.toExponential(6)} + ${im.toExponential(6)}·i`;
    magEl.textContent = mag.toExponential(6);
    log(`cos(π)  = ${Math.cos(Math.PI)}`);
    log(`sin(π)  = ${Math.sin(Math.PI)}`);
    log(`z       = (cos π + i sin π) + 1 = ${re} + ${im}·i`);
    log(`|z|     = ${mag} (ε = ${eps})`);

    const pass = mag <= eps;
    if (pass){
      setStatus('verified','ok');
      checkEl.textContent = 'PASS — |e^{iπ}+1| ≤ ε';
    } else {
      setStatus('mismatch','bad');
      checkEl.textContent = 'FAIL — |e^{iπ}+1| > ε';
    }

    lastARC = {
      question: "Verify Euler’s identity: e^{iπ} + 1 = 0.",
      answer: "e^{iπ} + 1 = 0",
      reason_lean4: [
        "import Mathlib",
        "open Complex",
        "theorem euler_identity : Complex.exp (Real.pi * Complex.I) + 1 = 0 := by",
        "  have h := Complex.exp_mul_I Real.pi",
        "  simpa [Real.cos_pi, Real.sin_pi] using h"
      ].join("\\n"),
      check: {
        method: "Numerical evaluation via cos(π)+i·sin(π), tolerance test",
        z_real: re, z_imag: im, magnitude: mag, epsilon: eps, pass
      }
    };
  }

  function copyARC(){
    if (!lastARC) { alert('Run the computation first to produce ARC output.'); return; }
    const blob = new Blob([JSON.stringify(lastARC, null, 2)], { type: 'application/json' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url; a.download = 'arc-euler-identity.json';
    document.body.appendChild(a); a.click(); a.remove();
    URL.revokeObjectURL(url);
  }

  runBtn.addEventListener('click', run);
  copyBtn.addEventListener('click', copyARC);
})();
</script>
</body>
</html>

